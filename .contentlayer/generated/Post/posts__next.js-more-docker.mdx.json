{
  "title": "Optimally dockerizing NextJS application and Lessons Learned",
  "image": "https://raw.githubusercontent.com/Lukis76/images/master/baner-next.js-more-docker.webp",
  "description": "I was working on containerizing a Next.js application. At first it seems just a straight forward job. I am not well versed in Javascript or NextJS but I knew what needed to be done but I knew what the requirement was. I only had one requirement i.e Image size should be small.",
  "date": "Aug 17 2023",
  "body": {
    "raw": "\n# Optimally dockerizing NextJS application and Lessons Learned\n\n<img src='https://raw.githubusercontent.com/Lukis76/images/master/baner-next.js-more-docker.webp' />\n\n### Introduction\nI was working on containerizing a Next.js application. At first it seems just a straight forward job. I am not well versed in Javascript or NextJS but I knew what needed to be done but I knew what the requirement was. I only had one requirement i.e **Image size should be small.**\n\nI created a file called **Dockerfile** in the project main directory and put the following configuration. Using a multi-stage build process to build in the docker image helped to selectively copy artifacts from one stage into another leaving behind all the unnecessary things which are not required in the final image.\n\nAfter all the needful was done, the Dockerfile looked like this\n\n```Dockerfile\n# Stage 1\nFROM node:16-alpine AS deps\nRUN apk add --no-cache libc6-compat\nWORKDIR /app\nCOPY package.json package-lock.json ./\nRUN  npm install --production\n\n# Stage 2\nFROM node:16-alpine AS builder\nWORKDIR /app\nCOPY --from=deps /app/node_modules ./node_modules\nCOPY . .\nRUN NODE_ENV=production npm run build\n\n# Stage 3\nFROM node:16-alpine AS runner\nWORKDIR /app\nENV NODE_ENV production\nRUN addgroup --system --gid 1001 nodejs && adduser --system --uid 1001 nextjs\nCOPY --from=builder --chown=nextjs:nodejs /app/.next ./.next\nCOPY --from=builder /app/node_modules ./node_modules\nCOPY --from=builder /app/package.json ./package.json\nUSER 1001\nEXPOSE 3000\nENV PORT 3000\nCMD [\"npm\", \"start\"]\n```\n\nI went ahead to build the docker image using following command\n\n```bash\n$ docker build -t my-app:v1 .\n```\n\n### Problem 1: Docker image size\n\nEverything looks good until i checked the docker image size.\n\n```bash\nEverything looks good until i checked the docker image size.\n```\n\n<img src='https://raw.githubusercontent.com/Lukis76/images/master/sorpendido.gif' className='w-64 translate-x-full' />\n\nIt came to my attention that my docker image size ended up being **1.01G**. This was somewhat expected when working with **nodejs**. I was not surprised as i had seen memes relating to **node_modules** before such as this\n\n<img src='https://raw.githubusercontent.com/Lukis76/images/master/size-node-modules.webp' />\n\nThinking everything will be okay, I tried deploying the application to my dev cluster which had memory of 2G. Immediately after deploying, it got OOMKilled.\n\nThe problem was my server memory itself is **2G** which is shared across multiple apps. Now when I run the app, it could not load such a big image into memory. Also, i should mention that docker containers are bigger than docker image hence when container was deployed it became probably around **1.6G** in size.\n\nThis broke my app and my happiness :’(.\n\n<img src='https://raw.githubusercontent.com/Lukis76/images/master/hongo-lorando.gif' className='w-64 translate-x-full'/>\n\n### Solution 1: Enable **standalone** output\n\nAfter a quick bit of research, I found that there was a way to reduce the size of the NextJS application by running a **standalone** build directory which contains all the necessary files for production deployment including selected files from **node_modules**. So, i leveraged this automatic copying feature by enabling it in **next.config.js** file\n\n```js\nconst nextConfig = {\n  reactStrictMode: true,\n  swcMinify: true,\n  images: {\n    remotePatterns: [\n      {\n        protocol: 'https',\n        hostname: 'images.pexels.com',\n      },\n    ],\n  },\n+ output: 'standalone',\n};\n\nmodule.exports = nextConfig;\n```\n\nOnce that is done and when we build the app, it creates two directories **standalone** and **static** directory inside **.next** folder. That is what we need to run the application in production.\n\nSo, I updated the **Dockerfile** to only copy required files into the runner stage rather than all the **node_modules** and other files.\n\nAfter updating the dockerfile, the change looked like this\n\n```git\n# Stage 1\nFROM node:16-alpine AS deps\nRUN apk add --no-cache libc6-compat\nWORKDIR /app\nCOPY package.json package-lock.json ./\nRUN  npm install --production\n\n# Stage 2\nFROM node:16-alpine AS builder\nWORKDIR /app\nCOPY --from=deps /app/node_modules ./node_modules\nCOPY . .\nRUN NODE_ENV=production npm run build\n\n# Stage 3\nFROM node:16-alpine AS runner\nWORKDIR /app\nENV NODE_ENV production\nRUN addgroup --system --gid 1001 nodejs && adduser --system --uid 1001 nextjs\n-COPY --from=builder --chown=nextjs:nodejs /app/.next ./.next\n-COPY --from=builder /app/node_modules ./node_modules\n-COPY --from=builder /app/package.json ./package.json\n+COPY --from=builder /app/next.config.js ./\n+COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./        \n+COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\nUSER 1001\nEXPOSE 3000\nENV PORT 3000\n-CMD [\"npm\", \"start\"]\n+CMD [\"node\", \"server.js\"]\n```\n\nOnce I built the application again and checked the docker image again. To my surprise the image was just **170M**. Our docker image just got way smaller from **1.42G** to just **170M**.\n\n```bash\n$ docker image ls\nREPOSITORY                 TAG       IMAGE ID       CREATED          SIZE\nmy-app                     v1        db04518b48bb   48 seconds ago   170MB\n```\n\nThis was a huge improvement.\n\n<img src='https://raw.githubusercontent.com/Lukis76/images/master/festejo.gif' className='w-64 translate-x-full' />\n\nWe also removed the dev dependency during build using **npm prune --production** which again reduced the image size to **150M**\n\nAfter change dockerfile looked like this\n\n```git\n# Stage 1\nFROM node:16-alpine AS deps\nRUN apk add --no-cache libc6-compat\nWORKDIR /app\nCOPY package.json package-lock.json ./\nRUN  npm install --production\n\n# Stage 2\nFROM node:16-alpine AS builder\nWORKDIR /app\nCOPY --from=deps /app/node_modules ./node_modules\nCOPY . .\n-RUN NODE_ENV=production npm run build\n+RUN NODE_ENV=production npm run build && npm prune --production\n\n# Stage 3\nFROM node:16-alpine AS runner\nWORKDIR /app\nENV NODE_ENV production\nRUN addgroup --system --gid 1001 nodejs && adduser --system --uid 1001 nextjs\n-COPY --from=builder --chown=nextjs:nodejs /app/.next ./.next\n-COPY --from=builder /app/node_modules ./node_modules\n-COPY --from=builder /app/package.json ./package.json\n+COPY --from=builder /app/next.config.js ./\n+COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./        \n+COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\nUSER 1001\nEXPOSE 3000\nENV PORT 3000\n-CMD [\"npm\", \"start\"]\n+CMD [\"node\", \"server.js\"]\n```\n\nI was happy with this. I went ahead and deployed the application in the cluster, which also worked well until another problem was born.\n\n### Problem 2: ENV variables passed at runtime were not being made available to client browser\n\nI had passed in environment variables from during runtime, but for some reason, those variables even if prefixed with **NEXT_PUBLIC_\\*** was not made available to the browser.\n\nI tried passing in those env vars using the ‘.env’ file which still did not work.\n\nI tried asking door to door on **reddit**, **github**, **SO** etc. No luck. Whatever I tried, variables were still being shown as **undefined**.\n\nI was given various advice to go for alternative routes i.e deploying to Vercel or Google cloud run which were legit advises if the work i was doing was timebound. With free time at hand, I decided to stick with it and try to find a way.\n\nAfter some days going into the rabbit hole, I found that when using NextJS with standalone output, we need to **declare ENV vars as part of the build step** which when done, works and env vars are accessible from the browser.\n\nBut that again introduced another risk i.e Docker Image with secrets baked in.\n\nI wanted to see if there was a way to circumvent it without baking secrets in docker image.\n\nAfter some more research, I found that there was no way to pass env var at runtime when building an app as a **standalone** output because NextJS only looks for the env defined at build time if it is exposed as **standalone** output.\n\n### Solution 2: Pass **ENV** vars to build stage as docker **build-args**\n\nTo resolve this, I ended up passing env var as an build argument to build stage during docker build.\n\nBefore that i had to add runtime configuration in **next.config.js** which would make all vars prefixed with **NEXT_PUBLIC_\\*** were made available to client browser using runtime configuration\n\nTurns out **NEXT_PUBLIC_\\*** prefix variables will only be shown to the browser when you are using Next version 9. For newer versions i.e 12 you would need to define runtime configuration in next.config.js and define it as part of either **env** or **publicRuntimeConfig**.\n\nI went ahead and added following configuration in **next.config.js** file\n\n```js\npublicRuntimeConfig: {\n    // remove private variables from processEnv\n    processEnv: Object.fromEntries(\n      Object.entries(process.env).filter(([key]) => key.includes('NEXT_PUBLIC_')),\n    ),\n  },\n```\n\nAfter the change **next.config.js** looked like this\n\n```git\nconst nextConfig = {\n  reactStrictMode: true,\n  swcMinify: true,\n  images: {\n    remotePatterns: [\n      {\n        protocol: 'https',\n        hostname: 'images.pexels.com',\n      },\n    ],\n  },\n+ publicRuntimeConfig: {\n+    // remove private variables from processEnv\n+    processEnv: Object.fromEntries(\n+      Object.entries(process.env).filter(([key]) => key.includes('NEXT_PUBLIC_')),\n+    ),\n+  },\n+  output: 'standalone',\n};\nmodule.exports = nextConfig;\n```\n\nI then passed env variable at build time using **ARG** and **ENV** parameter as shown below\n\n```git\n# Stage 1\nFROM node:16-alpine AS deps\nRUN apk add --no-cache libc6-compat\nWORKDIR /app\nCOPY package.json package-lock.json ./\nRUN  npm install --production\n\n# Stage 2\nFROM node:16-alpine AS builder\nWORKDIR /app\nCOPY --from=deps /app/node_modules ./node_modules\nCOPY . .\n+ARG HOST_API\n+ENV NEXT_PUBLIC_HOST_API=${HOST_API}\nRUN NODE_ENV=production npm run build\n\n# Stage 3\nFROM node:16-alpine AS runner\nWORKDIR /app\nENV NODE_ENV production\nRUN addgroup --system --gid 1001 nodejs && adduser --system --uid 1001 nextjs\nCOPY --from=builder /app/next.config.js ./\nCOPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./   \nCOPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\nUSER 1001\nEXPOSE 3000\nENV PORT 3000\nCMD [\"node\", \"server.js\"]\n```\n\nNow we need to pass build args when building the application.\n\n```bash\n$ docker build -t my-app:v1 . --build-arg API_URL=https://app1.com\n```\n\nOnce this was done and the application was deployed, we were able to access env vars from the browser without any issue.\n\n### Optimized Dockerfile for NextJS application\n\nAfter all these shenanigans, my optimal dockerfile became like this\n\n```dockerfile\n# Stage 1\nFROM node:16-alpine AS deps\nRUN apk add --no-cache libc6-compat\nWORKDIR /app\nCOPY package.json package-lock.json ./\nCOPY . .\nRUN npm install --omit=dev --production=true\n\n# Stage 2\nFROM node:16-alpine AS builder\nWORKDIR /app\nCOPY --from=deps /app/node_modules ./node_modules\nCOPY . .\nARG HOST_API\nENV NEXT_PUBLIC_HOST_API=${HOST_API}\nRUN NODE_ENV=production npm run build && npm prune --production\n\n# Stage 3\nFROM node:16-alpine AS runner\nWORKDIR /app\nENV NODE_ENV production\nRUN addgroup --system --gid 1001 nodejs && adduser --system --uid 1001 nextjs\nCOPY --from=builder /app/next.config.js ./\nCOPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./\nCOPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\nUSER nextjs\nEXPOSE 3000\nENV PORT 3000\nENV NEXT_TELEMETRY_DISABLED 1\nCMD [\"node\", \"server.js\"]\n```\n### Few things i learned when researching this issue\n\n1. **npm ci** is way faster than **npm install** and is more suitable when you want to do a clean build i.e via pipeline or docker build.\n\n2. When using **pulicRuntimeConfig** , all values are passed in to every page on the client browser rather than only the page which needs it. This could create some issues down the line, and might need to be revisited later with something like **serverRuntimeConfig** , or just **env**.\n\n### Conclusion\n\nAlthough this method would pack secret in the docker image, we thought we can compensate this by tightening the ecosystem around it i.e image being pulled from private registry, not running container as root, tuning CORS policies for backend API , applying tight RBAC policy to service account privilege in k8s, tight filesystem permission etc.\n\nAfter all of these if attacker gains access to the filesystem then we can assume they can get the env vars as well, and we are fucked ¯\\(ツ)/¯.\n\nAfter careful consideration, we decided this was good enough for us for now.\n\nWhile I started with one thing in mind, the series of events that unfolded, led me down a few rabbit holes and I was able to learn alot from them. I hope you were able to learn some new things as well.\n\nPlease do share this article if you find the reading useful. Thanks :).\n\n\n\n\n\n\n",
    "code": "var Component=(()=>{var un=Object.create;var I=Object.defineProperty;var mn=Object.getOwnPropertyDescriptor;var dn=Object.getOwnPropertyNames;var an=Object.getPrototypeOf,bn=Object.prototype.hasOwnProperty;var K=(d,e)=>()=>(e||d((e={exports:{}}).exports,e),e.exports),fn=(d,e)=>{for(var _ in e)I(d,_,{get:e[_],enumerable:!0})},ye=(d,e,_,g)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let N of dn(e))!bn.call(d,N)&&N!==_&&I(d,N,{get:()=>e[N],enumerable:!(g=mn(e,N))||g.enumerable});return d};var pn=(d,e,_)=>(_=d!=null?un(an(d)):{},ye(e||!d||!d.__esModule?I(_,\"default\",{value:d,enumerable:!0}):_,d)),_n=d=>ye(I({},\"__esModule\",{value:!0}),d);var De=K((jn,je)=>{je.exports=React});var Ee=K(X=>{\"use strict\";(function(){\"use strict\";var d=De(),e=Symbol.for(\"react.element\"),_=Symbol.for(\"react.portal\"),g=Symbol.for(\"react.fragment\"),N=Symbol.for(\"react.strict_mode\"),G=Symbol.for(\"react.profiler\"),q=Symbol.for(\"react.provider\"),J=Symbol.for(\"react.context\"),F=Symbol.for(\"react.forward_ref\"),T=Symbol.for(\"react.suspense\"),A=Symbol.for(\"react.suspense_list\"),k=Symbol.for(\"react.memo\"),B=Symbol.for(\"react.lazy\"),ke=Symbol.for(\"react.offscreen\"),H=Symbol.iterator,Re=\"@@iterator\";function Ce(o){if(o===null||typeof o!=\"object\")return null;var t=H&&o[H]||o[Re];return typeof t==\"function\"?t:null}var j=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b(o){{for(var t=arguments.length,r=new Array(t>1?t-1:0),c=1;c<t;c++)r[c-1]=arguments[c];Oe(\"error\",o,r)}}function Oe(o,t,r){{var c=j.ReactDebugCurrentFrame,u=c.getStackAddendum();u!==\"\"&&(t+=\"%s\",r=r.concat([u]));var m=r.map(function(l){return String(l)});m.unshift(\"Warning: \"+t),Function.prototype.apply.call(console[o],console,m)}}var Pe=!1,Se=!1,Ie=!1,Te=!1,Ae=!1,Z;Z=Symbol.for(\"react.module.reference\");function Be(o){return!!(typeof o==\"string\"||typeof o==\"function\"||o===g||o===G||Ae||o===N||o===T||o===A||Te||o===ke||Pe||Se||Ie||typeof o==\"object\"&&o!==null&&(o.$$typeof===B||o.$$typeof===k||o.$$typeof===q||o.$$typeof===J||o.$$typeof===F||o.$$typeof===Z||o.getModuleId!==void 0))}function Ye(o,t,r){var c=o.displayName;if(c)return c;var u=t.displayName||t.name||\"\";return u!==\"\"?r+\"(\"+u+\")\":r}function Q(o){return o.displayName||\"Context\"}function h(o){if(o==null)return null;if(typeof o.tag==\"number\"&&b(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"),typeof o==\"function\")return o.displayName||o.name||null;if(typeof o==\"string\")return o;switch(o){case g:return\"Fragment\";case _:return\"Portal\";case G:return\"Profiler\";case N:return\"StrictMode\";case T:return\"Suspense\";case A:return\"SuspenseList\"}if(typeof o==\"object\")switch(o.$$typeof){case J:var t=o;return Q(t)+\".Consumer\";case q:var r=o;return Q(r._context)+\".Provider\";case F:return Ye(o,o.render,\"ForwardRef\");case k:var c=o.displayName||null;return c!==null?c:h(o.type)||\"Memo\";case B:{var u=o,m=u._payload,l=u._init;try{return h(l(m))}catch{return null}}}return null}var y=Object.assign,v=0,ee,ne,oe,te,re,ce,se;function le(){}le.__reactDisabledLog=!0;function Me(){{if(v===0){ee=console.log,ne=console.info,oe=console.warn,te=console.error,re=console.group,ce=console.groupCollapsed,se=console.groupEnd;var o={configurable:!0,enumerable:!0,value:le,writable:!0};Object.defineProperties(console,{info:o,log:o,warn:o,error:o,group:o,groupCollapsed:o,groupEnd:o})}v++}}function Ue(){{if(v--,v===0){var o={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:y({},o,{value:ee}),info:y({},o,{value:ne}),warn:y({},o,{value:oe}),error:y({},o,{value:te}),group:y({},o,{value:re}),groupCollapsed:y({},o,{value:ce}),groupEnd:y({},o,{value:se})})}v<0&&b(\"disabledDepth fell below zero. This is a bug in React. Please file an issue.\")}}var Y=j.ReactCurrentDispatcher,M;function R(o,t,r){{if(M===void 0)try{throw Error()}catch(u){var c=u.stack.trim().match(/\\n( *(at )?)/);M=c&&c[1]||\"\"}return`\n`+M+o}}var U=!1,C;{var Ve=typeof WeakMap==\"function\"?WeakMap:Map;C=new Ve}function ue(o,t){if(!o||U)return\"\";{var r=C.get(o);if(r!==void 0)return r}var c;U=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var m;m=Y.current,Y.current=null,Me();try{if(t){var l=function(){throw Error()};if(Object.defineProperty(l.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(l,[])}catch(x){c=x}Reflect.construct(o,[],l)}else{try{l.call()}catch(x){c=x}o.call(l.prototype)}}else{try{throw Error()}catch(x){c=x}o()}}catch(x){if(x&&c&&typeof x.stack==\"string\"){for(var s=x.stack.split(`\n`),f=c.stack.split(`\n`),i=s.length-1,a=f.length-1;i>=1&&a>=0&&s[i]!==f[a];)a--;for(;i>=1&&a>=0;i--,a--)if(s[i]!==f[a]){if(i!==1||a!==1)do if(i--,a--,a<0||s[i]!==f[a]){var p=`\n`+s[i].replace(\" at new \",\" at \");return o.displayName&&p.includes(\"<anonymous>\")&&(p=p.replace(\"<anonymous>\",o.displayName)),typeof o==\"function\"&&C.set(o,p),p}while(i>=1&&a>=0);break}}}finally{U=!1,Y.current=m,Ue(),Error.prepareStackTrace=u}var E=o?o.displayName||o.name:\"\",ge=E?R(E):\"\";return typeof o==\"function\"&&C.set(o,ge),ge}function Le(o,t,r){return ue(o,!1)}function We(o){var t=o.prototype;return!!(t&&t.isReactComponent)}function O(o,t,r){if(o==null)return\"\";if(typeof o==\"function\")return ue(o,We(o));if(typeof o==\"string\")return R(o);switch(o){case T:return R(\"Suspense\");case A:return R(\"SuspenseList\")}if(typeof o==\"object\")switch(o.$$typeof){case F:return Le(o.render);case k:return O(o.type,t,r);case B:{var c=o,u=c._payload,m=c._init;try{return O(m(u),t,r)}catch{}}}return\"\"}var P=Object.prototype.hasOwnProperty,me={},de=j.ReactDebugCurrentFrame;function S(o){if(o){var t=o._owner,r=O(o.type,o._source,t?t.type:null);de.setExtraStackFrame(r)}else de.setExtraStackFrame(null)}function $e(o,t,r,c,u){{var m=Function.call.bind(P);for(var l in o)if(m(o,l)){var s=void 0;try{if(typeof o[l]!=\"function\"){var f=Error((c||\"React class\")+\": \"+r+\" type `\"+l+\"` is invalid; it must be a function, usually from the `prop-types` package, but received `\"+typeof o[l]+\"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.\");throw f.name=\"Invariant Violation\",f}s=o[l](t,l,c,r,null,\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\")}catch(i){s=i}s&&!(s instanceof Error)&&(S(u),b(\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\",c||\"React class\",r,l,typeof s),S(null)),s instanceof Error&&!(s.message in me)&&(me[s.message]=!0,S(u),b(\"Failed %s type: %s\",r,s.message),S(null))}}}var ze=Array.isArray;function V(o){return ze(o)}function Ke(o){{var t=typeof Symbol==\"function\"&&Symbol.toStringTag,r=t&&o[Symbol.toStringTag]||o.constructor.name||\"Object\";return r}}function Xe(o){try{return ie(o),!1}catch{return!0}}function ie(o){return\"\"+o}function ae(o){if(Xe(o))return b(\"The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.\",Ke(o)),ie(o)}var w=j.ReactCurrentOwner,Ge={key:!0,ref:!0,__self:!0,__source:!0},be,fe,L;L={};function qe(o){if(P.call(o,\"ref\")){var t=Object.getOwnPropertyDescriptor(o,\"ref\").get;if(t&&t.isReactWarning)return!1}return o.ref!==void 0}function Je(o){if(P.call(o,\"key\")){var t=Object.getOwnPropertyDescriptor(o,\"key\").get;if(t&&t.isReactWarning)return!1}return o.key!==void 0}function He(o,t){if(typeof o.ref==\"string\"&&w.current&&t&&w.current.stateNode!==t){var r=h(w.current.type);L[r]||(b('Component \"%s\" contains the string ref \"%s\". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',h(w.current.type),o.ref),L[r]=!0)}}function Ze(o,t){{var r=function(){be||(be=!0,b(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",t))};r.isReactWarning=!0,Object.defineProperty(o,\"key\",{get:r,configurable:!0})}}function Qe(o,t){{var r=function(){fe||(fe=!0,b(\"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",t))};r.isReactWarning=!0,Object.defineProperty(o,\"ref\",{get:r,configurable:!0})}}var en=function(o,t,r,c,u,m,l){var s={$$typeof:e,type:o,key:t,ref:r,props:l,_owner:m};return s._store={},Object.defineProperty(s._store,\"validated\",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(s,\"_self\",{configurable:!1,enumerable:!1,writable:!1,value:c}),Object.defineProperty(s,\"_source\",{configurable:!1,enumerable:!1,writable:!1,value:u}),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s};function nn(o,t,r,c,u){{var m,l={},s=null,f=null;r!==void 0&&(ae(r),s=\"\"+r),Je(t)&&(ae(t.key),s=\"\"+t.key),qe(t)&&(f=t.ref,He(t,u));for(m in t)P.call(t,m)&&!Ge.hasOwnProperty(m)&&(l[m]=t[m]);if(o&&o.defaultProps){var i=o.defaultProps;for(m in i)l[m]===void 0&&(l[m]=i[m])}if(s||f){var a=typeof o==\"function\"?o.displayName||o.name||\"Unknown\":o;s&&Ze(l,a),f&&Qe(l,a)}return en(o,s,f,u,c,w.current,l)}}var W=j.ReactCurrentOwner,pe=j.ReactDebugCurrentFrame;function D(o){if(o){var t=o._owner,r=O(o.type,o._source,t?t.type:null);pe.setExtraStackFrame(r)}else pe.setExtraStackFrame(null)}var $;$=!1;function z(o){return typeof o==\"object\"&&o!==null&&o.$$typeof===e}function _e(){{if(W.current){var o=h(W.current.type);if(o)return`\n\nCheck the render method of \\``+o+\"`.\"}return\"\"}}function on(o){{if(o!==void 0){var t=o.fileName.replace(/^.*[\\\\\\/]/,\"\"),r=o.lineNumber;return`\n\nCheck your code at `+t+\":\"+r+\".\"}return\"\"}}var he={};function tn(o){{var t=_e();if(!t){var r=typeof o==\"string\"?o:o.displayName||o.name;r&&(t=`\n\nCheck the top-level render call using <`+r+\">.\")}return t}}function xe(o,t){{if(!o._store||o._store.validated||o.key!=null)return;o._store.validated=!0;var r=tn(t);if(he[r])return;he[r]=!0;var c=\"\";o&&o._owner&&o._owner!==W.current&&(c=\" It was passed a child from \"+h(o._owner.type)+\".\"),D(o),b('Each child in a list should have a unique \"key\" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',r,c),D(null)}}function Ne(o,t){{if(typeof o!=\"object\")return;if(V(o))for(var r=0;r<o.length;r++){var c=o[r];z(c)&&xe(c,t)}else if(z(o))o._store&&(o._store.validated=!0);else if(o){var u=Ce(o);if(typeof u==\"function\"&&u!==o.entries)for(var m=u.call(o),l;!(l=m.next()).done;)z(l.value)&&xe(l.value,t)}}}function rn(o){{var t=o.type;if(t==null||typeof t==\"string\")return;var r;if(typeof t==\"function\")r=t.propTypes;else if(typeof t==\"object\"&&(t.$$typeof===F||t.$$typeof===k))r=t.propTypes;else return;if(r){var c=h(t);$e(r,o.props,\"prop\",c,o)}else if(t.PropTypes!==void 0&&!$){$=!0;var u=h(t);b(\"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?\",u||\"Unknown\")}typeof t.getDefaultProps==\"function\"&&!t.getDefaultProps.isReactClassApproved&&b(\"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.\")}}function cn(o){{for(var t=Object.keys(o.props),r=0;r<t.length;r++){var c=t[r];if(c!==\"children\"&&c!==\"key\"){D(o),b(\"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.\",c),D(null);break}}o.ref!==null&&(D(o),b(\"Invalid attribute `ref` supplied to `React.Fragment`.\"),D(null))}}function sn(o,t,r,c,u,m){{var l=Be(o);if(!l){var s=\"\";(o===void 0||typeof o==\"object\"&&o!==null&&Object.keys(o).length===0)&&(s+=\" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\");var f=on(u);f?s+=f:s+=_e();var i;o===null?i=\"null\":V(o)?i=\"array\":o!==void 0&&o.$$typeof===e?(i=\"<\"+(h(o.type)||\"Unknown\")+\" />\",s=\" Did you accidentally export a JSX literal instead of a component?\"):i=typeof o,b(\"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\",i,s)}var a=nn(o,t,r,u,m);if(a==null)return a;if(l){var p=t.children;if(p!==void 0)if(c)if(V(p)){for(var E=0;E<p.length;E++)Ne(p[E],o);Object.freeze&&Object.freeze(p)}else b(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");else Ne(p,o)}return o===g?cn(a):rn(a),a}}var ln=sn;X.Fragment=g,X.jsxDEV=ln})()});var we=K((En,ve)=>{\"use strict\";ve.exports=Ee()});var gn={};fn(gn,{default:()=>Nn,frontmatter:()=>hn});var n=pn(we()),hn={title:\"Optimally dockerizing NextJS application and Lessons Learned\",description:\"I was working on containerizing a Next.js application. At first it seems just a straight forward job. I am not well versed in Javascript or NextJS but I knew what needed to be done but I knew what the requirement was. I only had one requirement i.e Image size should be small.\",date:\"Aug 17 2023\",image:\"https://raw.githubusercontent.com/Lukis76/images/master/baner-next.js-more-docker.webp\"};function Fe(d){let e=Object.assign({h1:\"h1\",a:\"a\",span:\"span\",h3:\"h3\",p:\"p\",strong:\"strong\",div:\"div\",pre:\"pre\",code:\"code\",ol:\"ol\",li:\"li\"},d.components);return(0,n.jsxDEV)(n.Fragment,{children:[(0,n.jsxDEV)(e.h1,{id:\"optimally-dockerizing-nextjs-application-and-lessons-learned\",children:[(0,n.jsxDEV)(e.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#optimally-dockerizing-nextjs-application-and-lessons-learned\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this),\"Optimally dockerizing NextJS application and Lessons Learned\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:1},this),`\n`,(0,n.jsxDEV)(\"img\",{src:\"https://raw.githubusercontent.com/Lukis76/images/master/baner-next.js-more-docker.webp\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.h3,{id:\"introduction\",children:[(0,n.jsxDEV)(e.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#introduction\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this),\"Introduction\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"I was working on containerizing a Next.js application. At first it seems just a straight forward job. I am not well versed in Javascript or NextJS but I knew what needed to be done but I knew what the requirement was. I only had one requirement i.e \",(0,n.jsxDEV)(e.strong,{children:\"Image size should be small.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:250},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"I created a file called \",(0,n.jsxDEV)(e.strong,{children:\"Dockerfile\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:25},this),\" in the project main directory and put the following configuration. Using a multi-stage build process to build in the docker image helped to selectively copy artifacts from one stage into another leaving behind all the unnecessary things which are not required in the final image.\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"After all the needful was done, the Dockerfile looked like this\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:17,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsxDEV)(e.pre,{style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"Dockerfile\",\"data-theme\":\"default\",children:(0,n.jsxDEV)(e.code,{\"data-language\":\"Dockerfile\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"# Stage 1\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:104},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:85},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"FROM node:16-alpine AS deps\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"RUN apk add --no-cache libc6-compat\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"WORKDIR /app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY package.json package-lock.json ./\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"RUN  npm install --production\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"}},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"# Stage 2\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"FROM node:16-alpine AS builder\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:9,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:9,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"WORKDIR /app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY --from=deps /app/node_modules ./node_modules\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:11,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:11,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY . .\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"RUN NODE_ENV=production npm run build\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"}},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:14,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:14,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"# Stage 3\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"FROM node:16-alpine AS runner\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:16,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:16,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"WORKDIR /app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:17,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:17,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"ENV NODE_ENV production\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:18,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:18,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"RUN addgroup --system --gid 1001 nodejs && adduser --system --uid 1001 nextjs\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY --from=builder --chown=nextjs:nodejs /app/.next ./.next\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:20,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:20,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY --from=builder /app/node_modules ./node_modules\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:21,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:21,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY --from=builder /app/package.json ./package.json\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:22,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:22,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"USER 1001\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:23,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:23,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"EXPOSE 3000\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:24,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:24,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"ENV PORT 3000\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:25,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:25,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:'CMD [\"npm\", \"start\"]'},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:26,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:26,columnNumber:1},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:79},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"I went ahead to build the docker image using following command\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:48,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsxDEV)(e.pre,{style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"default\",children:(0,n.jsxDEV)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"default\",style:{display:\"grid\"},children:(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#B392F0\"},children:\"$\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:104},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:141},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"docker\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:178},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:220},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"build\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:257},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:298},this),(0,n.jsxDEV)(e.span,{style:{color:\"#79B8FF\"},children:\"-t\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:335},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:373},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"my-app:v1\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:410},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:455},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:492},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:85},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:79},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:50,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.h3,{id:\"problem-1-docker-image-size\",children:[(0,n.jsxDEV)(e.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#problem-1-docker-image-size\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this),\"Problem 1: Docker image size\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:54,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"Everything looks good until i checked the docker image size.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:56,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsxDEV)(e.pre,{style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"default\",children:(0,n.jsxDEV)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"default\",style:{display:\"grid\"},children:(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#B392F0\"},children:\"Everything\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:104},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:150},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"looks\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:187},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:228},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"good\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:265},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:305},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"until\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:342},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:383},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"i\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:420},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:457},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"checked\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:494},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:537},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"the\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:574},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:613},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"docker\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:650},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:692},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"image\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:729},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:770},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"size.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:807},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:85},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:79},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:58,columnNumber:1},this),`\n`,(0,n.jsxDEV)(\"img\",{src:\"https://raw.githubusercontent.com/Lukis76/images/master/sorpendido.gif\",className:\"w-64 translate-x-full\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:62,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"It came to my attention that my docker image size ended up being \",(0,n.jsxDEV)(e.strong,{children:\"1.01G\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:64,columnNumber:66},this),\". This was somewhat expected when working with \",(0,n.jsxDEV)(e.strong,{children:\"nodejs\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:64,columnNumber:122},this),\". I was not surprised as i had seen memes relating to \",(0,n.jsxDEV)(e.strong,{children:\"node_modules\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:64,columnNumber:186},this),\" before such as this\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:64,columnNumber:1},this),`\n`,(0,n.jsxDEV)(\"img\",{src:\"https://raw.githubusercontent.com/Lukis76/images/master/size-node-modules.webp\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:66,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"Thinking everything will be okay, I tried deploying the application to my dev cluster which had memory of 2G. Immediately after deploying, it got OOMKilled.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:68,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"The problem was my server memory itself is \",(0,n.jsxDEV)(e.strong,{children:\"2G\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:70,columnNumber:44},this),\" which is shared across multiple apps. Now when I run the app, it could not load such a big image into memory. Also, i should mention that docker containers are bigger than docker image hence when container was deployed it became probably around \",(0,n.jsxDEV)(e.strong,{children:\"1.6G\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:70,columnNumber:296},this),\" in size.\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:70,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"This broke my app and my happiness :\\u2019(.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:72,columnNumber:1},this),`\n`,(0,n.jsxDEV)(\"img\",{src:\"https://raw.githubusercontent.com/Lukis76/images/master/hongo-lorando.gif\",className:\"w-64 translate-x-full\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:74,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.h3,{id:\"solution-1-enable-standalone-output\",children:[(0,n.jsxDEV)(e.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#solution-1-enable-standalone-output\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this),\"Solution 1: Enable \",(0,n.jsxDEV)(e.strong,{children:\"standalone\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:76,columnNumber:24},this),\" output\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:76,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"After a quick bit of research, I found that there was a way to reduce the size of the NextJS application by running a \",(0,n.jsxDEV)(e.strong,{children:\"standalone\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:78,columnNumber:119},this),\" build directory which contains all the necessary files for production deployment including selected files from \",(0,n.jsxDEV)(e.strong,{children:\"node_modules\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:78,columnNumber:245},this),\". So, i leveraged this automatic copying feature by enabling it in \",(0,n.jsxDEV)(e.strong,{children:\"next.config.js\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:78,columnNumber:328},this),\" file\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:78,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsxDEV)(e.pre,{style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxDEV)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"const\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:104},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:145},this),(0,n.jsxDEV)(e.span,{style:{color:\"#79B8FF\"},children:\"nextConfig\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:182},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:228},this),(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"=\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:265},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" {\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:302},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:85},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"  reactStrictMode: \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:75},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:115},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"  swcMinify: \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#79B8FF\"},children:\"true\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:69},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:109},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"  images: {\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"    remotePatterns: [\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"      {\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"        protocol: \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"'https'\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:74},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:125},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"        hostname: \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"'images.pexels.com'\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:74},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:137},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"      },\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:9,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:9,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"    ],\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:11,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:11,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"+ output: \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"'standalone'\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:66},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\",\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:122},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"};\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:14,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#79B8FF\"},children:\"module\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\".\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:62},this),(0,n.jsxDEV)(e.span,{style:{color:\"#79B8FF\"},children:\"exports\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:99},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:142},this),(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"=\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:179},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" nextConfig;\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:216},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:1},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:79},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:80,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"Once that is done and when we build the app, it creates two directories \",(0,n.jsxDEV)(e.strong,{children:\"standalone\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:98,columnNumber:73},this),\" and \",(0,n.jsxDEV)(e.strong,{children:\"static\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:98,columnNumber:92},this),\" directory inside \",(0,n.jsxDEV)(e.strong,{children:\".next\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:98,columnNumber:120},this),\" folder. That is what we need to run the application in production.\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:98,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"So, I updated the \",(0,n.jsxDEV)(e.strong,{children:\"Dockerfile\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:100,columnNumber:19},this),\" to only copy required files into the runner stage rather than all the \",(0,n.jsxDEV)(e.strong,{children:\"node_modules\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:100,columnNumber:104},this),\" and other files.\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:100,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"After updating the dockerfile, the change looked like this\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:102,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsxDEV)(e.pre,{style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"git\",\"data-theme\":\"default\",children:(0,n.jsxDEV)(e.code,{\"data-language\":\"git\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"# Stage 1\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:104},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:85},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"FROM node:16-alpine AS deps\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"RUN apk add --no-cache libc6-compat\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"WORKDIR /app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY package.json package-lock.json ./\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"RUN  npm install --production\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"}},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"# Stage 2\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"FROM node:16-alpine AS builder\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:9,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:9,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"WORKDIR /app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY --from=deps /app/node_modules ./node_modules\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:11,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:11,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY . .\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"RUN NODE_ENV=production npm run build\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"}},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:14,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:14,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"# Stage 3\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"FROM node:16-alpine AS runner\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:16,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:16,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"WORKDIR /app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:17,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:17,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"ENV NODE_ENV production\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:18,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:18,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"RUN addgroup --system --gid 1001 nodejs && adduser --system --uid 1001 nextjs\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"-COPY --from=builder --chown=nextjs:nodejs /app/.next ./.next\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:20,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:20,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"-COPY --from=builder /app/node_modules ./node_modules\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:21,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:21,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"-COPY --from=builder /app/package.json ./package.json\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:22,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:22,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+COPY --from=builder /app/next.config.js ./\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:23,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:23,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./        \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:24,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:24,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:25,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:25,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"USER 1001\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:26,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:26,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"EXPOSE 3000\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:27,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:27,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"ENV PORT 3000\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:28,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:28,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:'-CMD [\"npm\", \"start\"]'},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:29,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:29,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:'+CMD [\"node\", \"server.js\"]'},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:30,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:30,columnNumber:1},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:79},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:104,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"Once I built the application again and checked the docker image again. To my surprise the image was just \",(0,n.jsxDEV)(e.strong,{children:\"170M\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:137,columnNumber:106},this),\". Our docker image just got way smaller from \",(0,n.jsxDEV)(e.strong,{children:\"1.42G\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:137,columnNumber:159},this),\" to just \",(0,n.jsxDEV)(e.strong,{children:\"170M\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:137,columnNumber:177},this),\".\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:137,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsxDEV)(e.pre,{style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"default\",children:(0,n.jsxDEV)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#B392F0\"},children:\"$\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:104},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:141},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"docker\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:178},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:220},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"image\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:257},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:298},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"ls\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:335},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:85},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#B392F0\"},children:\"REPOSITORY\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"                 \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:66},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"TAG\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:119},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"       \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:158},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"IMAGE\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:201},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:242},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"ID\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:279},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"       \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:317},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"CREATED\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:360},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"          \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:403},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"SIZE\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:449},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#B392F0\"},children:\"my-app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"                     \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:62},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"v1\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:119},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"        \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:157},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"db04518b48bb\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:201},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"   \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:249},this),(0,n.jsxDEV)(e.span,{style:{color:\"#79B8FF\"},children:\"48\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:288},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:326},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"seconds\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:363},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:406},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"ago\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:443},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"   \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:482},this),(0,n.jsxDEV)(e.span,{style:{color:\"#79B8FF\"},children:\"170\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:521},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"MB\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:560},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:1},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:79},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:139,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"This was a huge improvement.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:145,columnNumber:1},this),`\n`,(0,n.jsxDEV)(\"img\",{src:\"https://raw.githubusercontent.com/Lukis76/images/master/festejo.gif\",className:\"w-64 translate-x-full\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:147,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"We also removed the dev dependency during build using \",(0,n.jsxDEV)(e.strong,{children:\"npm prune --production\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:149,columnNumber:55},this),\" which again reduced the image size to \",(0,n.jsxDEV)(e.strong,{children:\"150M\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:149,columnNumber:120},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:149,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"After change dockerfile looked like this\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:151,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsxDEV)(e.pre,{style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"git\",\"data-theme\":\"default\",children:(0,n.jsxDEV)(e.code,{\"data-language\":\"git\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"# Stage 1\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:104},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:85},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"FROM node:16-alpine AS deps\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"RUN apk add --no-cache libc6-compat\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"WORKDIR /app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY package.json package-lock.json ./\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"RUN  npm install --production\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"}},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"# Stage 2\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"FROM node:16-alpine AS builder\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:9,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:9,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"WORKDIR /app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY --from=deps /app/node_modules ./node_modules\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:11,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:11,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY . .\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"-RUN NODE_ENV=production npm run build\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+RUN NODE_ENV=production npm run build && npm prune --production\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:14,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:14,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"}},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"# Stage 3\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:16,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:16,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"FROM node:16-alpine AS runner\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:17,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:17,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"WORKDIR /app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:18,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:18,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"ENV NODE_ENV production\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"RUN addgroup --system --gid 1001 nodejs && adduser --system --uid 1001 nextjs\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:20,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:20,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"-COPY --from=builder --chown=nextjs:nodejs /app/.next ./.next\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:21,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:21,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"-COPY --from=builder /app/node_modules ./node_modules\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:22,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:22,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"-COPY --from=builder /app/package.json ./package.json\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:23,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:23,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+COPY --from=builder /app/next.config.js ./\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:24,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:24,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./        \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:25,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:25,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:26,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:26,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"USER 1001\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:27,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:27,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"EXPOSE 3000\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:28,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:28,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"ENV PORT 3000\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:29,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:29,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:'-CMD [\"npm\", \"start\"]'},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:30,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:30,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:'+CMD [\"node\", \"server.js\"]'},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:31,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:31,columnNumber:1},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:79},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:153,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"I was happy with this. I went ahead and deployed the application in the cluster, which also worked well until another problem was born.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:187,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.h3,{id:\"problem-2-env-variables-passed-at-runtime-were-not-being-made-available-to-client-browser\",children:[(0,n.jsxDEV)(e.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#problem-2-env-variables-passed-at-runtime-were-not-being-made-available-to-client-browser\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this),\"Problem 2: ENV variables passed at runtime were not being made available to client browser\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:189,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"I had passed in environment variables from during runtime, but for some reason, those variables even if prefixed with \",(0,n.jsxDEV)(e.strong,{children:\"NEXT_PUBLIC_*\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:191,columnNumber:119},this),\" was not made available to the browser.\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:191,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"I tried passing in those env vars using the \\u2018.env\\u2019 file which still did not work.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:193,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"I tried asking door to door on \",(0,n.jsxDEV)(e.strong,{children:\"reddit\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:195,columnNumber:32},this),\", \",(0,n.jsxDEV)(e.strong,{children:\"github\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:195,columnNumber:44},this),\", \",(0,n.jsxDEV)(e.strong,{children:\"SO\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:195,columnNumber:56},this),\" etc. No luck. Whatever I tried, variables were still being shown as \",(0,n.jsxDEV)(e.strong,{children:\"undefined\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:195,columnNumber:131},this),\".\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:195,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"I was given various advice to go for alternative routes i.e deploying to Vercel or Google cloud run which were legit advises if the work i was doing was timebound. With free time at hand, I decided to stick with it and try to find a way.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:197,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"After some days going into the rabbit hole, I found that when using NextJS with standalone output, we need to \",(0,n.jsxDEV)(e.strong,{children:\"declare ENV vars as part of the build step\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:199,columnNumber:111},this),\" which when done, works and env vars are accessible from the browser.\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:199,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"But that again introduced another risk i.e Docker Image with secrets baked in.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:201,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"I wanted to see if there was a way to circumvent it without baking secrets in docker image.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:203,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"After some more research, I found that there was no way to pass env var at runtime when building an app as a \",(0,n.jsxDEV)(e.strong,{children:\"standalone\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:205,columnNumber:110},this),\" output because NextJS only looks for the env defined at build time if it is exposed as \",(0,n.jsxDEV)(e.strong,{children:\"standalone\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:205,columnNumber:212},this),\" output.\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:205,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.h3,{id:\"solution-2-pass-env-vars-to-build-stage-as-docker-build-args\",children:[(0,n.jsxDEV)(e.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#solution-2-pass-env-vars-to-build-stage-as-docker-build-args\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this),\"Solution 2: Pass \",(0,n.jsxDEV)(e.strong,{children:\"ENV\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:207,columnNumber:22},this),\" vars to build stage as docker \",(0,n.jsxDEV)(e.strong,{children:\"build-args\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:207,columnNumber:60},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:207,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"To resolve this, I ended up passing env var as an build argument to build stage during docker build.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:209,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"Before that i had to add runtime configuration in \",(0,n.jsxDEV)(e.strong,{children:\"next.config.js\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:211,columnNumber:51},this),\" which would make all vars prefixed with \",(0,n.jsxDEV)(e.strong,{children:\"NEXT_PUBLIC_*\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:211,columnNumber:110},this),\" were made available to client browser using runtime configuration\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:211,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"Turns out \",(0,n.jsxDEV)(e.strong,{children:\"NEXT_PUBLIC_*\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:213,columnNumber:11},this),\" prefix variables will only be shown to the browser when you are using Next version 9. For newer versions i.e 12 you would need to define runtime configuration in next.config.js and define it as part of either \",(0,n.jsxDEV)(e.strong,{children:\"env\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:213,columnNumber:239},this),\" or \",(0,n.jsxDEV)(e.strong,{children:\"publicRuntimeConfig\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:213,columnNumber:250},this),\".\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:213,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"I went ahead and added following configuration in \",(0,n.jsxDEV)(e.strong,{children:\"next.config.js\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:215,columnNumber:51},this),\" file\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:215,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsxDEV)(e.pre,{style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxDEV)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#B392F0\"},children:\"publicRuntimeConfig\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:104},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\": {\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:159},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:85},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"    \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#6A737D\"},children:\"// remove private variables from processEnv\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:60},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"    \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#B392F0\"},children:\"processEnv\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:60},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\": Object.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:106},this),(0,n.jsxDEV)(e.span,{style:{color:\"#B392F0\"},children:\"fromEntries\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:151},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:198},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"      Object.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#B392F0\"},children:\"entries\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:69},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"(process.env).\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:112},this),(0,n.jsxDEV)(e.span,{style:{color:\"#B392F0\"},children:\"filter\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:162},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"(([\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:204},this),(0,n.jsxDEV)(e.span,{style:{color:\"#FFAB70\"},children:\"key\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:243},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"]) \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:282},this),(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"=>\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:321},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" key.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:362},this),(0,n.jsxDEV)(e.span,{style:{color:\"#B392F0\"},children:\"includes\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:403},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"(\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:447},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"'NEXT_PUBLIC_'\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:484},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\")),\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:542},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"    ),\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"  },\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:1},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:79},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:217,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"After the change \",(0,n.jsxDEV)(e.strong,{children:\"next.config.js\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:226,columnNumber:18},this),\" looked like this\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:226,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsxDEV)(e.pre,{style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"git\",\"data-theme\":\"default\",children:(0,n.jsxDEV)(e.code,{\"data-language\":\"git\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"const nextConfig = {\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:104},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:85},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"  reactStrictMode: true,\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"  swcMinify: true,\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"  images: {\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"    remotePatterns: [\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"      {\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"        protocol: 'https',\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"        hostname: 'images.pexels.com',\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"      },\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:9,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:9,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"    ],\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"  },\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:11,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:11,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+ publicRuntimeConfig: {\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+    // remove private variables from processEnv\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+    processEnv: Object.fromEntries(\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:14,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:14,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+      Object.entries(process.env).filter(([key]) => key.includes('NEXT_PUBLIC_')),\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+    ),\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:16,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:16,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+  },\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:17,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:17,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+  output: 'standalone',\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:18,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:18,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"};\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"module.exports = nextConfig;\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:20,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:20,columnNumber:1},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:79},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:228,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:[\"I then passed env variable at build time using \",(0,n.jsxDEV)(e.strong,{children:\"ARG\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:251,columnNumber:48},this),\" and \",(0,n.jsxDEV)(e.strong,{children:\"ENV\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:251,columnNumber:60},this),\" parameter as shown below\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:251,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsxDEV)(e.pre,{style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"git\",\"data-theme\":\"default\",children:(0,n.jsxDEV)(e.code,{\"data-language\":\"git\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"# Stage 1\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:104},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:85},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"FROM node:16-alpine AS deps\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"RUN apk add --no-cache libc6-compat\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"WORKDIR /app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY package.json package-lock.json ./\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"RUN  npm install --production\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"}},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"# Stage 2\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"FROM node:16-alpine AS builder\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:9,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:9,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"WORKDIR /app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY --from=deps /app/node_modules ./node_modules\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:11,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:11,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY . .\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+ARG HOST_API\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"+ENV NEXT_PUBLIC_HOST_API=${HOST_API}\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:14,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:14,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"RUN NODE_ENV=production npm run build\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"}},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:16,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:16,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"# Stage 3\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:17,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:17,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"FROM node:16-alpine AS runner\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:18,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:18,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"WORKDIR /app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"ENV NODE_ENV production\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:20,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:20,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"RUN addgroup --system --gid 1001 nodejs && adduser --system --uid 1001 nextjs\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:21,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:21,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY --from=builder /app/next.config.js ./\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:22,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:22,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./   \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:23,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:23,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:24,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:24,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"USER 1001\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:25,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:25,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"EXPOSE 3000\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:26,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:26,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:\"ENV PORT 3000\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:27,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:27,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#e1e4e8\"},children:'CMD [\"node\", \"server.js\"]'},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:28,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:28,columnNumber:1},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:79},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:253,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"Now we need to pass build args when building the application.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:284,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsxDEV)(e.pre,{style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"default\",children:(0,n.jsxDEV)(e.code,{\"data-language\":\"bash\",\"data-theme\":\"default\",style:{display:\"grid\"},children:(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#B392F0\"},children:\"$\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:104},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:141},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"docker\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:178},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:220},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"build\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:257},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:298},this),(0,n.jsxDEV)(e.span,{style:{color:\"#79B8FF\"},children:\"-t\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:335},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:373},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"my-app:v1\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:410},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:455},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\".\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:492},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:529},this),(0,n.jsxDEV)(e.span,{style:{color:\"#79B8FF\"},children:\"--build-arg\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:566},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:613},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:\"API_URL=https://app1.com\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:650},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:85},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:79},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:286,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"Once this was done and the application was deployed, we were able to access env vars from the browser without any issue.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:290,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.h3,{id:\"optimized-dockerfile-for-nextjs-application\",children:[(0,n.jsxDEV)(e.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#optimized-dockerfile-for-nextjs-application\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this),\"Optimized Dockerfile for NextJS application\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:292,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"After all these shenanigans, my optimal dockerfile became like this\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:294,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsxDEV)(e.pre,{style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"dockerfile\",\"data-theme\":\"default\",children:(0,n.jsxDEV)(e.code,{\"data-language\":\"dockerfile\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#6A737D\"},children:\"# Stage 1\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:104},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:85},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"FROM\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" node:16-alpine \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:60},this),(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"AS\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:112},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" deps\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:150},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:2,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"RUN\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" apk add --no-cache libc6-compat\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:59},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:3,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"WORKDIR\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" /app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:63},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:4,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"COPY\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" package.json package-lock.json ./\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:60},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:5,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"COPY\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" . .\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:60},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:6,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"RUN\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" npm install --omit=dev --production=true\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:59},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:7,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:8,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#6A737D\"},children:\"# Stage 2\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:9,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:9,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"FROM\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" node:16-alpine \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:60},this),(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"AS\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:112},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" builder\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:150},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:10,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"WORKDIR\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:11,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" /app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:11,columnNumber:63},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:11,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"COPY\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" --from=deps /app/node_modules ./node_modules\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:60},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:12,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"COPY\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" . .\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:60},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:13,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"ARG\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:14,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" HOST_API\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:14,columnNumber:59},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:14,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"ENV\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" NEXT_PUBLIC_HOST_API=${HOST_API}\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:59},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:15,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"RUN\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:16,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" NODE_ENV=production npm run build && npm prune --production\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:16,columnNumber:59},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:16,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:\" \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:17,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:(0,n.jsxDEV)(e.span,{style:{color:\"#6A737D\"},children:\"# Stage 3\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:18,columnNumber:20},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:18,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"FROM\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" node:16-alpine \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:60},this),(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"AS\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:112},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" runner\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:150},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:19,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"WORKDIR\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:20,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" /app\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:20,columnNumber:63},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:20,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"ENV\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:21,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" NODE_ENV production\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:21,columnNumber:59},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:21,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"RUN\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:22,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" addgroup --system --gid 1001 nodejs && adduser --system --uid 1001 nextjs\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:22,columnNumber:59},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:22,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"COPY\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:23,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" --from=builder /app/next.config.js ./\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:23,columnNumber:60},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:23,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"COPY\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:24,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" --from=builder --chown=nextjs:nodejs /app/.next/standalone ./\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:24,columnNumber:60},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:24,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"COPY\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:25,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:25,columnNumber:60},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:25,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"USER\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:26,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" nextjs\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:26,columnNumber:60},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:26,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"EXPOSE\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:27,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" 3000\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:27,columnNumber:62},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:27,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"ENV\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:28,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" PORT 3000\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:28,columnNumber:59},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:28,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"ENV\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:29,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" NEXT_TELEMETRY_DISABLED 1\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:29,columnNumber:59},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:29,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.span,{\"data-line\":\"\",children:[(0,n.jsxDEV)(e.span,{style:{color:\"#F97583\"},children:\"CMD\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:30,columnNumber:20},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\" [\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:30,columnNumber:59},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:'\"node\"'},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:30,columnNumber:97},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\", \"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:30,columnNumber:149},this),(0,n.jsxDEV)(e.span,{style:{color:\"#9ECBFF\"},children:'\"server.js\"'},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:30,columnNumber:187},this),(0,n.jsxDEV)(e.span,{style:{color:\"#E1E4E8\"},children:\"]\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:30,columnNumber:244},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:30,columnNumber:1},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:79},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:296,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.h3,{id:\"few-things-i-learned-when-researching-this-issue\",children:[(0,n.jsxDEV)(e.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#few-things-i-learned-when-researching-this-issue\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this),\"Few things i learned when researching this issue\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:328,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.ol,{children:[`\n`,(0,n.jsxDEV)(e.li,{children:[`\n`,(0,n.jsxDEV)(e.p,{children:[(0,n.jsxDEV)(e.strong,{children:\"npm ci\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:330,columnNumber:4},this),\" is way faster than \",(0,n.jsxDEV)(e.strong,{children:\"npm install\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:330,columnNumber:34},this),\" and is more suitable when you want to do a clean build i.e via pipeline or docker build.\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:330,columnNumber:4},this),`\n`]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:330,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.li,{children:[`\n`,(0,n.jsxDEV)(e.p,{children:[\"When using \",(0,n.jsxDEV)(e.strong,{children:\"pulicRuntimeConfig\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:332,columnNumber:15},this),\" , all values are passed in to every page on the client browser rather than only the page which needs it. This could create some issues down the line, and might need to be revisited later with something like \",(0,n.jsxDEV)(e.strong,{children:\"serverRuntimeConfig\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:332,columnNumber:245},this),\" , or just \",(0,n.jsxDEV)(e.strong,{children:\"env\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:332,columnNumber:279},this),\".\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:332,columnNumber:4},this),`\n`]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:332,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:330,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.h3,{id:\"conclusion\",children:[(0,n.jsxDEV)(e.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#conclusion\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this)},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this),\"Conclusion\"]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:334,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"Although this method would pack secret in the docker image, we thought we can compensate this by tightening the ecosystem around it i.e image being pulled from private registry, not running container as root, tuning CORS policies for backend API , applying tight RBAC policy to service account privilege in k8s, tight filesystem permission etc.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:336,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"After all of these if attacker gains access to the filesystem then we can assume they can get the env vars as well, and we are fucked \\xAF(\\u30C4)/\\xAF.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:338,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"After careful consideration, we decided this was good enough for us for now.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:340,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"While I started with one thing in mind, the series of events that unfolded, led me down a few rabbit holes and I was able to learn alot from them. I hope you were able to learn some new things as well.\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:342,columnNumber:1},this),`\n`,(0,n.jsxDEV)(e.p,{children:\"Please do share this article if you find the reading useful. Thanks :).\"},void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:344,columnNumber:1},this)]},void 0,!0,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\",lineNumber:1,columnNumber:1},this)}function xn(d={}){let{wrapper:e}=d.components||{};return e?(0,n.jsxDEV)(e,Object.assign({},d,{children:(0,n.jsxDEV)(Fe,d,void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this)}),void 0,!1,{fileName:\"/home/lucasmanoguerra/Documents/code/projets/blog-ui-next/src/content/posts/_mdx_bundler_entry_point-6d3755c1-f719-40e8-bfc3-5e05fc77bb24.mdx\"},this):Fe(d)}var Nn=xn;return _n(gn);})();\n/*! Bundled license information:\n\nreact/cjs/react-jsx-dev-runtime.development.js:\n  (**\n   * @license React\n   * react-jsx-dev-runtime.development.js\n   *\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n*/\n;return Component;"
  },
  "_id": "posts/next.js-more-docker.mdx",
  "_raw": {
    "sourceFilePath": "posts/next.js-more-docker.mdx",
    "sourceFileName": "next.js-more-docker.mdx",
    "sourceFileDir": "posts",
    "contentType": "mdx",
    "flattenedPath": "posts/next.js-more-docker"
  },
  "type": "Post",
  "slug": "/posts/next.js-more-docker",
  "slugAsParams": "next.js-more-docker"
}